var u=Object.defineProperty;var f=(i,e,t)=>e in i?u(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t;var n=(i,e,t)=>(f(i,typeof e!="symbol"?e+"":e,t),t),g=(i,e,t)=>{if(!e.has(i))throw TypeError("Cannot "+t)};var c=(i,e,t)=>{if(e.has(i))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(i):e.set(i,t)};var h=(i,e,t)=>(g(i,e,"access private method"),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const o of s)if(o.type==="childList")for(const d of o.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&r(d)}).observe(document,{childList:!0,subtree:!0});function t(s){const o={};return s.integrity&&(o.integrity=s.integrity),s.referrerPolicy&&(o.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?o.credentials="include":s.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(s){if(s.ep)return;s.ep=!0;const o=t(s);fetch(s.href,o)}})();const a=document;var l,p;class y{constructor(){c(this,l);n(this,"posters");n(this,"player");n(this,"video");n(this,"spinner");this.posters=Array.from(document.getElementsByClassName("vlink")),this.player=a.getElementById("video-modal"),this.video=a.getElementById("video"),this.spinner=a.getElementById("spinner")}setUpVideoPlayer(){this.posters.forEach(e=>{e.addEventListener("click",h(this,l,p).bind(this))}),this.player.addEventListener("click",e=>{const t=this.player.getBoundingClientRect();(e.clientY<t.top||e.clientY>t.bottom||e.clientX<t.left||e.clientX>t.right)&&(this.player.close(),this.video.pause(),this.spinner.classList.toggle("hidden"),this.video.classList.toggle("hidden"))}),this.video.addEventListener("loadeddata",()=>{console.log("--- loadeddata",new Date().getUTCMilliseconds()),this.player.showModal(),this.spinner.classList.toggle("hidden"),this.video.classList.toggle("hidden"),this.video.play()}),this.video.addEventListener("loadstart",()=>console.log("---  load start",new Date().getUTCMilliseconds())),this.player.addEventListener("keydown",e=>{e.key==="Escape"&&this.video.pause()}),document.addEventListener("fullscreenchange",()=>{document.fullscreenElement||(this.player.close(),this.video.pause())}),this.video.addEventListener("webkitendfullscreen",()=>{this.player.close(),this.video.pause()})}logPosters(){console.log(this.posters)}logPlayer(){console.log(this.player)}}l=new WeakSet,p=function(e){e.preventDefault();const r=e.target.parentElement;r.getAttribute("href")!==""&&(this.video.src=r.getAttribute("href"),this.player.showModal())};const m=new y;m.setUpVideoPlayer();
